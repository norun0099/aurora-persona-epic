# =========================================================
# Aurora Persona Epic - Render Deploy (System Python Mode)
# =========================================================
# Renderã®ãƒ“ãƒ«ãƒ‰ï¼å®Ÿè¡Œç’°å¢ƒã‚’åˆ†é›¢ã™ã‚‹ä»•æ§˜ã«å¯¾å¿œã™ã‚‹ãŸã‚ã€
# .venvã‚’ä½¿ç”¨ã›ãšã€ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚·ã‚¹ãƒ†ãƒ Pythonã«ç›´æ¥å°å…¥ã™ã‚‹ã€‚
# ã“ã‚Œã«ã‚ˆã‚Š PyYAML ç­‰ãŒå‰Šé™¤ã•ã‚Œãšæ°¸ç¶šåŒ–ã•ã‚Œã‚‹ã€‚
# =========================================================

services:
  - type: web
    name: aurora-persona-epic
    env: python
    region: oregon

    buildCommand: |
      echo "ğŸ”§ [Build] Installing dependencies into system Python..."
      pip install --upgrade pip
      pip install --no-cache-dir -r requirements.txt
      echo "ğŸ“¦ [Build] Forcing PyYAML reinstall (system-level)..."
      pip install --force-reinstall PyYAML

    startCommand: bash start.sh
    autoDeploy: true

    envVars:
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: PORT
        value: "10000"
      - key: AURORA_PUSH_INTERVAL
        value: "600"
      - key: RENDER_ENV
        value: "true"
