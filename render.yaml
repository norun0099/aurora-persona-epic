services:
  - type: web
    name: aurora-persona-epic
    env: python

    buildCommand: |
      pip install -r requirements.txt

    startCommand: |
      bash start.sh

    envVars:
      - key: GIT_REPO_URL
        fromEnvVar: GIT_REPO_URL
      - key: GIT_USER_EMAIL
        fromEnvVar: GIT_USER_EMAIL
      - key: GIT_USER_NAME
        fromEnvVar: GIT_USER_NAME
      - key: GITHUB_TOKEN
        fromEnvVar: GITHUB_TOKEN
      - key: PORT
        value: 10000
      - key: AURORA_PUSH_INTERVAL
        fromEnvVar: AURORA_PUSH_INTERVAL
      - key: AURORA_MAX_QUEUE_SIZE
        fromEnvVar: AURORA_MAX_QUEUE_SIZE
      - key: AURORA_PUSH_RETRY_LIMIT
        fromEnvVar: AURORA_PUSH_RETRY_LIMIT
      - key: AURORA_PUSH_QUEUE_PATH
        fromEnvVar: AURORA_PUSH_QUEUE_PATH

    routes:
      # ðŸ©µ Aurora self-updating API route
      - type: http
        name: update-repo-file
        path: /self/update-repo-file
        file: api/self/update_repo_file.py

      # ðŸ’  Aurora whiteboard store API route
      - type: http
        name: store-whiteboard
        path: /whiteboard/store
        file: api/whiteboard.py
