# =========================================================
# Aurora Persona Epic - Render Deploy Configuration
# =========================================================
# Renderä¸Šã§ã®ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œã‚’å®‰å®šåŒ–ã™ã‚‹ãŸã‚ã®è¨­å®šã€‚
# .venv ãŒå‰Šé™¤ã•ã‚Œã¦ã‚‚ PyYAML ã‚’å«ã‚€ä¾å­˜é–¢ä¿‚ã‚’ä¿æŒã—ã€
# Aurora ã® FastAPI ã‚µãƒ¼ãƒãƒ¼ã‚’å®‰å…¨ã«èµ·å‹•ã•ã›ã‚‹ã€‚
# =========================================================

services:
  - type: web
    name: aurora-persona-epic
    env: python
    region: oregon

    buildCommand: |
      echo "ğŸ”§ [Build] Installing Python dependencies..."
      pip install --upgrade pip
      pip install --no-cache-dir -r requirements.txt
      echo "ğŸ“¦ [Build] Installing PyYAML into persistent target..."
      pip install --target /opt/render/project/src/.venv/lib/python3.11/site-packages PyYAML

    startCommand: bash start.sh
    autoDeploy: true

    envVars:
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: PORT
        value: "10000"
      - key: AURORA_PUSH_INTERVAL
        value: "600"
      - key: RENDER_ENV
        value: "true"
